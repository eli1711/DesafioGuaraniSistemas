<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Lista de Clientes</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
  <a class="btn btn-outline-secondary btn-sm" th:href="@{/home}">← Início</a>

<div class="container py-4">

  <h1 class="mb-4">Lista de Clientes</h1>

  
  <div th:if="${mensagem}" class="alert alert-success" th:text="${mensagem}"></div>

  <!-- Mensagem de erro -->
  <div th:if="${erro}" class="alert alert-danger" th:text="${erro}"></div>

  <div class="mb-3 d-flex justify-content-between">
    <a class="btn btn-primary" th:href="@{/clientes/novo}">➕ Novo Cliente</a>

    <!-- Buscar por nome -->
    <form class="d-flex" th:action="@{/clientes/buscar}" method="get">
      <input class="form-control me-2" type="text" name="nome" placeholder="Buscar por nome..." />
      <button class="btn btn-outline-secondary" type="submit">Buscar</button>
    </form>
  </div>

  <table class="table table-striped table-bordered align-middle">
    <thead class="table-dark">
      <tr>
        <th>Nome completo</th>
        <th>E-mail</th>
        <th>CPF</th>
        <th>Telefone</th>
        <th>Endereço completo</th>
        <th class="text-center">Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="cliente : ${clientes}">
        <td th:text="${cliente.nome}"></td>
        <td th:text="${cliente.email}"></td>
        <td th:text="${cliente.cpf}"></td>
        <td th:text="${cliente.telefone}"></td>
        <td>
          <span th:text="${cliente.logradouro}"></span>,
          <span th:text="${cliente.numero}"></span>
          <span th:text="${cliente.complemento}"></span> -
          <span th:text="${cliente.bairro}"></span> -
          <span th:text="${cliente.cidade}"></span>/<span th:text="${cliente.uf}"></span>,
          CEP: <span th:text="${cliente.cep}"></span>
        </td>
        <td class="text-center">
          <a class="btn btn-sm btn-warning" th:href="@{'/clientes/editar/' + ${cliente.id}}">✏️ Editar</a>
          <a class="btn btn-sm btn-danger"
             th:href="@{'/clientes/excluir/' + ${cliente.id}}"
             onclick="return confirm('Tem certeza que deseja excluir este cliente?');">🗑️ Excluir</a>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(clientes)}">
        <td colspan="6" class="text-center text-muted">Nenhum cliente encontrado.</td>
      </tr>
    </tbody>
  </table>
</div>
</body>
</html>
